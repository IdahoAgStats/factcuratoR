<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to the codebook structure • factcuratoR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction to the codebook structure">
<meta property="og:description" content="factcuratoR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">factcuratoR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/example_cultivar_matching.html">Example of the cultivar matching process</a>
    </li>
    <li>
      <a href="../articles/intro_codebooks.html">Introduction to the codebook structure</a>
    </li>
    <li>
      <a href="../articles/intro_validation.html">Introduction to the validation functions</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to the codebook structure</h1>
                        <h4 data-toc-skip class="author">Jacqueline Tay</h4>
            
            <h4 data-toc-skip class="date">Jan 13, 2022</h4>
      
      
      <div class="hidden name"><code>intro_codebooks.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The purpose of <strong>factcuratoR</strong> is to provide sets of functions to help standardize variety testing data for curation of variety testing data sets supporting the WAVE project.</p>
<p>The goal of the WAVE program curation is to generate <u>trial data</u> and <u>trial metadata</u> that conform to the controlled vocabulary codebooks.</p>
</div>
<div class="section level2">
<h2 id="overview-of-codebook-structure">Overview of codebook structure<a class="anchor" aria-label="anchor" href="#overview-of-codebook-structure"></a>
</h2>
<p>First, load <strong>factcuratoR</strong> and point to the main codebook (which currently must be named <em>codebooks_all_db.csv</em> for the validation functions)</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">factcuratoR</span><span class="op">)</span>
<span class="co">#&gt; Warning: package 'dplyr' was built under R version 4.1.2</span>
<span class="co">#&gt; Warning: package 'readr' was built under R version 4.1.2</span>
<span class="co">#&gt; Warning: package 'tidyr' was built under R version 4.1.2</span>
<span class="co">#&gt; Warning: package 'lubridate' was built under R version 4.1.2</span>
<span class="co">#&gt; Warning: package 'fuzzyjoin' was built under R version 4.1.2</span>

<span class="va">codebook_folder</span> <span class="op">&lt;-</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span>
  <span class="st">"tests/testthat/test_controlled_vocab"</span><span class="op">)</span></code></pre></div>
<p>The main codebook contains the variable names and required status for the trial data and the trial metadata. For example, the trial data should contain the columns trial, variety, entry, and plot. The trial metadata should contain columns for trial, nursery, year, location, etc.</p>
<p><span class="important"> Note! </span> Traits are collected for each trial, so conceptually, it would make sense for the traits (such as <code>test_weight</code> or <code>height</code>) to be contained in the main codebook associated with trial_data. However, because the traits list isexpected to get rather long, the traits are stored in a separate file called <em>traits.csv</em>. For validating the columns in the trial data, the validation functions pull in the traits and treats each trait as a column in the trial data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/create_dm.html">create_dm</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="va">codebook_folder</span>, <span class="st">"codebooks_all_db.csv"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="figure">
<div id="htmlwidget-4e2bff6d2bc068c24375" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-4e2bff6d2bc068c24375">{"x":{"diagram":"#data_model\ndigraph {\ngraph [rankdir=LR tooltip=\"Data Model\" ]\n\nnode [margin=0 fontcolor = \"#444444\" ]\n\nedge [color = \"#555555\", arrowsize = 1, ]\n\npack=true\npackmode= \"node\"\n\n  \"crop_market_classes\" [label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#555555\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#EFEBDD\" BORDER=\"0\"><FONT COLOR=\"#000000\">crop_market_classes<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"crop\"><U>crop<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">species<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"cultivar\" [label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#555555\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#EFEBDD\" BORDER=\"0\"><FONT COLOR=\"#000000\">cultivar<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"crop\">crop<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"variety\"><U>variety<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">alias<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">pedigree<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">year_released<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">usage<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">usda_pi_number<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">pvp<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">patent<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">comments<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">date_added<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"grower_cooperator\" [label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#555555\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#EFEBDD\" BORDER=\"0\"><FONT COLOR=\"#000000\">grower_cooperator<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">grower_cooperator<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">type<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">company<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"locations\" [label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#555555\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#EFEBDD\" BORDER=\"0\"><FONT COLOR=\"#000000\">locations<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"location\"><U>location<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">loc_abbr<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">county<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">state<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"nursery\" [label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#555555\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#EFEBDD\" BORDER=\"0\"><FONT COLOR=\"#000000\">nursery<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"nursery\"><U>nursery<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">description_nursery<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"single_market_class\">single_market_class<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">crop_type<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"traits\" [label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#555555\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#EFEBDD\" BORDER=\"0\"><FONT COLOR=\"#000000\">traits<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">conversion<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">crop_type<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">description_traits<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">instrumentation<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">print_name<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"traits\"><U>traits<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">units<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">value_range<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">value_type<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"trial_data\" [label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#555555\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#EFEBDD\" BORDER=\"0\"><FONT COLOR=\"#000000\">trial_data<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">trial<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"variety\">variety<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">entry<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">plot<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">rep<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">range<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">row<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"trials_metadata\" [label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#555555\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#EFEBDD\" BORDER=\"0\"><FONT COLOR=\"#000000\">trials_metadata<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">trial<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"nursery\">nursery<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">year<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\" PORT=\"location\">location<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">latitude<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">longitude<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">irrigation<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">planting_date<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">harvest_date<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">plot_length<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">plot_width<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">row_spacing_in<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">npks_lb_acre<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">chemical_trts<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">seed_rate_per_acre<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">seed_trt<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">agronomic_notes<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">soil_type<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">soil_om<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">ph<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">n_lbs_acre<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">p_ppm<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">k_ppm<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">s_ppm<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">free_lime_pct<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">tillage<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#FFFFFF\">unpublished<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n\"cultivar\":\"crop\"->\"crop_market_classes\":\"crop\"\n\"nursery\":\"single_market_class\"->\"crop_market_classes\":\"crop\"\n\"trials_metadata\":\"location\"->\"locations\":\"location\"\n\"trial_data\":\"variety\"->\"cultivar\":\"variety\"\n\"trials_metadata\":\"nursery\"->\"nursery\":\"nursery\"\n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script><p class="caption">
Fig. 1 Example codebook structure
</p>
</div>
<p>The file <em>codebooks_all_db.csv</em> also specifies whether a variable must conform to controlled vocabularies. If so, the controlled vocabularies are listed in another codebook (e.g. allowed levels of nursery in <code>trials_metadata</code> are defined in the nursery codebook). Let’s call these ‘controlled vocabulary codebooks’ to better distinguish them from the ‘main codebook.’</p>
<p>Said another way, the ‘main codebook’ hold column names and the ‘controlled vocabulary codebooks’ hold levels that are approved as column contents.</p>
<p>Just as the main codebook defines the columns that are present in the trial_data and trials_metadata,* codebooks_all_db.csv* also defines the columns that are present in the controlled vocabulary codebooks. For the example (Fig. 1), <em>codebooks_all_db.csv</em> also has information for the column names in the cultivar, nursery, location, and crop_market_classes controlled vocabular codebooks.</p>
</div>
<div class="section level2">
<h2 id="more-about-codebooks_all_db-csv">More about codebooks_all_db.csv<a class="anchor" aria-label="anchor" href="#more-about-codebooks_all_db-csv"></a>
</h2>
<p>The codebooks_all_db.csv has the following (required) columns:</p>
<ul>
<li>
<code>book</code>: name of the codebook<br>
</li>
<li>
<code>variable</code>: name of a column in the trial data, metadata, or a codebook<br>
</li>
<li>
<code>value_type</code>: A level matching one of the following options:
<ul>
<li>categorical: type if the variable must conform to controlled vocabularies (acceptable variables must be specified in values_defined_in or value_range)<br>
</li>
<li>string: uncontrolled string (validation function will check to ensure <code>is.character() == TRUE</code>)<br>
</li>
<li>integer (validation will check <code>%%1 == 0</code>)<br>
</li>
<li>continuous (acceptable range must be provided in <code>value_range</code>)<br>
</li>
<li>date (validation will check for yyyy-mm-dd format)<br>
</li>
</ul>
</li>
<li>
<code>meaning</code>: description of the variable, including units or formatting requirements</li>
<li>
<code>values_defined_in</code>: This is NA if value_type != “categorical.” Otherwise, this field should be populated with a name that matches a book where the variable controlled vocabulary is defined (e.g. for location in trials_metadata, the values_defined_in is “locations”)
<ul>
<li>
<code>value_range</code>: If this variable does not have controlled vocabularies, enter the accepted values or ranges. This formatting is used in the <em>qc_validate_fns.R</em> to validate the data.
<ul>
<li>Entries should be separated by semi-colons (e.g. “TRUE; FALSE” or “1; 2; 3”) *Strings should be quoted (e.g. “value1”; “value2”)<br>
</li>
<li>Range should be in the form: min to max (e.g. 0 to 100)</li>
<li>Separate range and values using: | (e.g. 0 to 100 | -9)</li>
<li>Due to Excel formatting issues, negative numbers should be prefaced with ‘ but without closing quotes (e.g. “‘-180”)</li>
</ul>
</li>
</ul>
</li>
<li>
<code>primary_key</code> [??]</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">codebooks_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readin_db.html">readin.db</a></span><span class="op">(</span><span class="va">codebook_folder</span><span class="op">)</span>
<span class="co">#&gt; This function name is being retained for backwards compatibility.</span>
<span class="co">#&gt;           Please use readin_db()</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">codebooks_all</span><span class="op">$</span><span class="va">codebooks_all_db.csv</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">book</span> <span class="op">==</span> <span class="st">"trial_data"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="3%">
<col width="3%">
<col width="2%">
<col width="3%">
<col width="4%">
<col width="37%">
<col width="6%">
<col width="4%">
<col width="19%">
<col width="1%">
<col width="4%">
<col width="5%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="left">book</th>
<th align="left">required</th>
<th align="right">col_num</th>
<th align="left">variable</th>
<th align="left">value_type</th>
<th align="left">meaning</th>
<th align="left">values_defined_in</th>
<th align="left">value_range</th>
<th align="left">notes</th>
<th align="left">type</th>
<th align="left">previous name</th>
<th align="right">max_characters</th>
<th align="left">primary_key</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">trial_data</td>
<td align="left">TRUE</td>
<td align="right">1</td>
<td align="left">trial</td>
<td align="left">string</td>
<td align="left">unique identifier for a single field trial based on the program, nursery, location, year, and agronomic_trt</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">defined by the trials_metadata associated with this trial</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">trial_data</td>
<td align="left">TRUE</td>
<td align="right">2</td>
<td align="left">variety</td>
<td align="left">categorical</td>
<td align="left">genetically unique crop germplasm</td>
<td align="left">cultivar</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">trial_data</td>
<td align="left">TRUE</td>
<td align="right">3</td>
<td align="left">entry</td>
<td align="left">integer</td>
<td align="left">code for a the variety that is assigned to a single variety for a single year</td>
<td align="left">NA</td>
<td align="left">0 to 500</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">trial_data</td>
<td align="left">TRUE</td>
<td align="right">4</td>
<td align="left">plot</td>
<td align="left">integer</td>
<td align="left">unique identifier for a single plot within a trial</td>
<td align="left">NA</td>
<td align="left">1 to 1e6</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">trial_data</td>
<td align="left">TRUE</td>
<td align="right">6</td>
<td align="left">range</td>
<td align="left">integer</td>
<td align="left">what range the plot is found in</td>
<td align="left">NA</td>
<td align="left">1 to 200</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">trial_data</td>
<td align="left">TRUE</td>
<td align="right">5</td>
<td align="left">rep</td>
<td align="left">integer</td>
<td align="left">identifier for a experimental block within a field trial</td>
<td align="left">NA</td>
<td align="left">1 to 20</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">trial_data</td>
<td align="left">TRUE</td>
<td align="right">7</td>
<td align="left">row</td>
<td align="left">integer</td>
<td align="left">what row the plot is found in</td>
<td align="left">NA</td>
<td align="left">1 to 200</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">codebooks_all</span><span class="op">$</span><span class="va">codebooks_all_db.csv</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">book</span> <span class="op">==</span> <span class="st">"locations"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="3%">
<col width="3%">
<col width="2%">
<col width="3%">
<col width="4%">
<col width="10%">
<col width="6%">
<col width="6%">
<col width="42%">
<col width="1%">
<col width="5%">
<col width="5%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="left">book</th>
<th align="left">required</th>
<th align="right">col_num</th>
<th align="left">variable</th>
<th align="left">value_type</th>
<th align="left">meaning</th>
<th align="left">values_defined_in</th>
<th align="left">value_range</th>
<th align="left">notes</th>
<th align="left">type</th>
<th align="left">previous name</th>
<th align="right">max_characters</th>
<th align="left">primary_key</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">locations</td>
<td align="left">NA</td>
<td align="right">3</td>
<td align="left">county</td>
<td align="left">string</td>
<td align="left">county where city is located</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">currently only counties in Idaho, single entry may include multiple counties when a city straddles multiple counties</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">locations</td>
<td align="left">NA</td>
<td align="right">2</td>
<td align="left">loc_abbr</td>
<td align="left">categorical</td>
<td align="left">location abbreviation</td>
<td align="left">locations</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">locations</td>
<td align="left">NA</td>
<td align="right">1</td>
<td align="left">location</td>
<td align="left">categorical</td>
<td align="left">nearest city to a field trial</td>
<td align="left">locations</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">locations</td>
<td align="left">NA</td>
<td align="right">4</td>
<td align="left">state</td>
<td align="left">string</td>
<td align="left">State where city is located</td>
<td align="left">NA</td>
<td align="left">“ID”; “OR”; “WA”</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="updating-the-controlled-vocabularies">Updating the controlled vocabularies<a class="anchor" aria-label="anchor" href="#updating-the-controlled-vocabularies"></a>
</h2>
<p>When updating any codebook, the <em>codebooks_all_db.csv</em> must be updated to reflect the change.</p>
<ul>
<li>A newly added variable column would correspond to a new row in <em>codebooks_all_db.csv</em>.<br>
</li>
<li>A changed variable column name would correspond to change in variable name in an existing row. Care must be taken as variables may be used in several different codebooks. Renames should be consistent across codebooks.</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jacqueline Tay.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
